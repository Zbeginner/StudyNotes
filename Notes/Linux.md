# Linux 笔记

## 网络连接

- 桥连接
  - Linux 和主机共处同一网段，可以和其它的系统通信，但是可能造成ip冲突
- NAT
  - Linux和主机处以不同网段，但是可以通过主机代理的方式访问其它系统。安全性高
- 主机模式
  - Linux是一台独立的主机，不能访问外网

### 设定静态IP地址



## 文件目录

- /bin 是Binary的缩写，这个目录存放着最经常使用的命令
- /sbin s是Super User 的意思，这里存放的是系统管理员使用的系统管理程序
- /home 存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的
- /root 该目录为系统管理员，也称做超级权限的用户主目录
- /lib 系统开机所需要的最基本的动态链接库。几乎所有的应用程序都需要用到这些共享库。
- /lost+found 这个目录一般情况下是空的，当系统非法关机时，这里就会存放一些文件
- **<u>/etc</u>** 所有的系统管理所需要的配置文件和子目录
- **<u>/user</u>** 用户的很多应用程序和文件都放在这个目录下。(所安装的软件放这里)
- /boot 存放的时启动Linux时使用的一些文件。
- /proc 这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息。
- /srv service缩写，该目录存放一些服务启动之后需要提取的数据
- /sys 这是Linux2.6内核一个很大的变化，该目录下安装了2.6内核中新出现的一个文件系统
- /tmp 这个目录是存放一些临时文件的
- /dev 类似windows的设备管理器，把所有的硬件用文件的形式存储
- **<u>/media</u>**  Linux系统会自动识别一些设备，例如U盘、光驱等，当识别以后，Linux会把识别的设备挂载到这个目录下
- /mmt 系统提供该目录是为了让用户临时挂载别的文件系统的。我们可以将外部的存储挂载在/mmt上，然后进入该目录就可以查看里面的内容了。如文件共享
- /opt 这是给主机额外安装软件所摆放的目录，如安装Mysql数据库就可以放在该目录下。默认为空
- **<u>/user/local</u>** 这是另一个给主机额外安装软件所安装的目录。一般通过编译源码的方式安装的程序
- /var 这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。包括各种日子文件。
- /selinux  SELinux是一种安全子系统，它能控制程序只能访问特定的文件

## vi和vim

1. 三种模式

   1. 正常模式
      - 以vim打开一个档案就直接进入正常模式。在这个模式中，你可以使用方向键按键来移动光标，你可以使用 **删除字符** 或 **删除整行** 来处理档案内容，也可以使用 **复制、贴上**来处理你的文件数据
   2. 插入模式
      - 按下i、o、a、r（大小写皆可）等任意一个字母之后才会进入编辑模式，一般来说按i即可。
   3. 命令行模式
      - 在这个模式当中，可以提供你相关指令，完成读取、存盘、替换离开vim、显示行号等的动作则是在此模式中达成的。 

2. vi 和 vim 三种模式的相互转化

   ![](image\vi关系转换图.png)

   - wq 保存并推出
   - q 仅退出(如修改文本内容需使用q!)
   - q!  强制退出 

3. 快捷键

   - 拷贝当前行 **yy** ,拷贝当前行开始的5行 **5yy** ,粘贴 **p**
   - 删除当前行 **dd** ，删除当前行向下的5行 **5dd**
   - 在文件中查找某个单词[ 命令行模式下 **/要查找的内容** ，回车 查找 ，输入**n** 查找下一个]
   - 设置文本的行号 命令行模式下 **set nu**  取消文件的行号 **set nonu**
   - **G** 到文档末尾 **gg**到文档首行
   - 撤销操作 **u** (只能在正常模式下)
   - 移动光标在制定的某行 eg:  **20 shift+g** （正常模式下）

## Linux常用指令(操作介在root用户下)

1. 关机重启命令

   - shutdown
     - shutdown -h now：立即关机
     - shutdown -h 1：一分钟后关机
     - shutdown -r now：立即重启
   - halt    等效于关机
   - reboot  重启系统
   - sync  把内存的数据同步到磁盘  用作保护数据

2. 用户登录和注销

   1. logout  登出，注销用户(在图形界面无效)

3. 用户管理

   1. 添加用户

      - usreadd [选项] 用户名

        eg: useradd  xm  添加一个名为xm的用户

        eg: useradd -d /home/test xq 在/home/test目录下增加一个xq的用户

        eg:useradd -g groupname username  

   2. 给用户指定或者修改密码

      - passwd 用户名

        eg: 给xiaoming指定密码   passwd xiaoming

   3. 删除用户

      - userdel 用户名

        eg: userdel xm  删除用户xm，但保留家目录

        eg: userdel -r xq 删除用户xq,同时删除他的家目录(**一般不用**)

   4. 查询用户

      - id 用户名

   5. 切换用户

      - su - 切换用户名

        细节:从权限高的用户切换到权限地的用户，不需要密码，反之需要；当需要返回到原来用户的时候，使用exit指令就好。 

## 组管理

1. 增加组
   - groupadd 组名
2. 删除组
   - groupdel 组名
3. 创建用户时，分配组
   - adduser -g 组名 用户名
4. 更改用户组
   - usermod-g 组名 用户名
5. 配置文件：
   1. /etc/passwd  用户信息文件
   2. /etc/group 组信息文件
   3. /etc/shadow 用户密码信息

## 找回密码

思路：进入单用户模式，然后找回密码。

## 文件操作

-|rw-|r--|r--. |1|zzy |cafuc|16 |3月 30 01:24 |a.txt

- rwx权限：
  - 作用在文件
    - r: 读权限
    - w:写权限
    - x:执行权
  - 作用在目录
    - r ：可以查看
    - w：可以修改
    - X：可以进入该目录

第一组 :

- -普通文件
- d 目录
- l 软连接
- c 字符设备（键盘鼠标）
- b 块文件，硬盘

第二组 : 表示文件所有者拥有的权限

第三组: 文件所在组的权限

第四组:文件其它组的权限

第五组:文件的硬链接数，如果是目录则表示子目录数

第六组:文件的拥有者

第七组:文件所在组

第八组:

- 文件：文件大小
- 目录：固定大小4096

第九组:文件最后修改的时间

第十组:文件名

------

新建文件夹： mkdir 文件夹名

- 新建一个名为test的文件夹在home下   mkdir /home/test

新建文本： vi test.(文本格式)

删除文件或者文件夹:

```markdown
1、删除home目录下的test目录
	rm /home/test

2、这种不带参数的删除方法经常会提示无法删除，因为权限不够。
	rm -r /home/test

3、-r是递归的删除参数表中的目录及其子目录。 目录将被清空并且删除。 当删除目录包含的具有写保护的文件时用户通常是被提示的。
	rm -rf /home/test

4、f是不提示用户，删除目录下的所有文件。请注意检查路径，输成别的目录就悲剧了。
	rm -ir /home/test

5、-i是交互模式。使用这个选项，rm命令在删除任何文件前提示用户确认。
```

## 防火墙

状态查看

service iptables status

临时关闭防火墙

service iptables stop 

## 端口状态

netstat -nplt 

netstat -nplt | grep java

## 文件跨机器拷贝SCP

scp  -r /opt/xxx root@hadoop101:/opt   将本机器的opt目录下的xxx目录下的所有文件拷贝到hadoop101机器上的opt目录下

scp -r root@hadoop100:/etc/profile /etc/profile  拉取hadoop100上的文件到自己的机器上

scp -r root@hadoop100:/etc/profile root@hadoop103:/etc/profile 

## SSH免密登陆

```shell
cd #进入家目录
cd .ssh/ #如果没有这个目录，先ssh远程登陆一个即可
ssh-keygen -t rsa # 生成公私钥
ssh-copy-id hadoop103 #将公钥拷贝到103机器上
```



## Centos6 修改系统时间

1. root权限
2. date -s “要设置的时间”   设置系统当前的软件时间，只设置软件时间关机后会失效
3. hwclock -w    同步bios的硬件时间

